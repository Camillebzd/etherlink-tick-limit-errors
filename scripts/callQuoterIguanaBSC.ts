import { ethers } from "hardhat";

async function sendTransaction() {
  // PancakeInterfaceMulticallV2 BSC testnet
  const contractAddress = "0xeeF6ff30cF5D5b8aBA0DE16A01d17A0697a275b5";

  // Replace with the contract's ABI
  const contractABI = [
    {
      "inputs": [],
      "name": "gasLeft",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "gaslimit",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "target",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "gasLimit",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "callData",
              "type": "bytes"
            }
          ],
          "internalType": "struct PancakeInterfaceMulticallV2.Call[]",
          "name": "calls",
          "type": "tuple[]"
        }
      ],
      "name": "multicall",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "blockNumber",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "bool",
              "name": "success",
              "type": "bool"
            },
            {
              "internalType": "uint256",
              "name": "gasUsed",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "returnData",
              "type": "bytes"
            }
          ],
          "internalType": "struct PancakeInterfaceMulticallV2.Result[]",
          "name": "returnData",
          "type": "tuple[]"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "target",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "gasLimit",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "callData",
              "type": "bytes"
            }
          ],
          "internalType": "struct PancakeInterfaceMulticallV2.Call[]",
          "name": "calls",
          "type": "tuple[]"
        },
        {
          "internalType": "uint256",
          "name": "gasBuffer",
          "type": "uint256"
        }
      ],
      "name": "multicallWithGasLimitation",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "blockNumber",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "bool",
              "name": "success",
              "type": "bool"
            },
            {
              "internalType": "uint256",
              "name": "gasUsed",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "returnData",
              "type": "bytes"
            }
          ],
          "internalType": "struct PancakeInterfaceMulticallV2.Result[]",
          "name": "returnData",
          "type": "tuple[]"
        },
        {
          "internalType": "uint256",
          "name": "lastSuccessIndex",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ];

  // Get the signer (the account that will interact with the contract)
  const [signer] = await ethers.getSigners();

  // Create a contract instance
  const contract = new ethers.Contract(contractAddress, contractABI, signer);

  console.log("--- before call ---");

  // target contract address 0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2 (QuoterV2)
  // gas limit 1000000n
  // calldata: ......
  const param = [
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
    ["0xbC203d7f83677c7ed3F7acEc959963E7F4ECC5C2", 1000000n, "0xcdca175300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000a18f07d736b90be550000000000000000000000000000000000000000000000000000000000000000000002bb1ea698633d57705e93b0e40c1077d46cd6a51d80009c4a7c9092a5d2c3663b7c5f714dba806d02d62b58a000000000000000000000000000000000000000000"],
  ]
  console.log("Number of iteration:", param.length);
  const tx = await contract.multicallWithGasLimitation(param, 12000000n);
  console.log("--- call done ---");
}

sendTransaction().catch((error) => {
  console.error(error);
  process.exit(1);
});